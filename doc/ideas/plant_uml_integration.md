### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ü–ª–∞—Ü–¥–∞—Ä–º–∞ (–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞) üèóÔ∏è

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –º—ã –≥–æ—Ç–æ–≤–∏–º —Ñ–∞–π–ª–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —á—Ç–æ–±—ã –ø—Ä–æ–µ–∫—Ç –æ—Å—Ç–∞–≤–∞–ª—Å—è —á–∏—Å—Ç—ã–º, –∞ –Ω–µ –ø—Ä–µ–≤—Ä–∞—â–∞–ª—Å—è –≤ —Å–≤–∞–ª–∫—É. –ú—ã —Å–æ–∑–¥–∞–µ–º "–¥–æ–º" –¥–ª—è –Ω–∞—à–µ–≥–æ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ —Å—Ç–∏–ª–µ–π.

–°–Ω–∞—á–∞–ª–∞ —Ç–µ–±–µ –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–∫–∏ `asset`. –°–µ–π—á–∞—Å —Ç–∞–º –∂–∏–≤—É—Ç —Ç–æ–ª—å–∫–æ —à—Ä–∏—Ñ—Ç—ã. –ù–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `bins` (–¥–ª—è –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤) –∏ –ø–∞–ø–∫—É `themes` (–¥–ª—è puml-—Å—Ç–∏–ª–µ–π).

–í –ø–∞–ø–∫—É `asset bins` —Ç—ã —Å–∫–∞—á–∏–≤–∞–µ—à—å `plantuml jar`. –Ø –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤–µ—Ä—Å–∏—é —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º Smetana (–æ–±—ã—á–Ω–æ —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–ª–∏–∑–æ–≤), —á—Ç–æ–±—ã –Ω–µ —Å—Ç–∞–≤–∏—Ç—å Graphviz.

–í –ø–∞–ø–∫—É `asset themes` —Ç—ã –∫–ª–∞–¥–µ—à—å —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, `default style puml`. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ. "–ì–æ–ª—ã–π" PlantUML –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –ø—Ä–∏–≤–µ—Ç –∏–∑ 90-—Ö (–∂–µ–ª—Ç—ã–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏, –∫—Ä–∞—Å–Ω—ã–µ —Ä–∞–º–∫–∏). –í —ç—Ç–æ–º —Ñ–∞–π–ª–µ —Ç—ã –ø—Ä–æ–ø–∏—à–µ—à—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã (–∫—Å—Ç–∞—Ç–∏, –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ `JetBrains Mono` –∏–∑ —Å–æ—Å–µ–¥–Ω–µ–π –ø–∞–ø–∫–∏) –∏ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è.

### –§–∞–∑–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ –î–≤–∏–∂–∫–∞ (–õ–æ–≥–∏–∫–∞ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞) ‚öôÔ∏è

–ó–¥–µ—Å—å –º—ã –ø–∏—à–µ–º Python-–∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –æ–±—â–∞—Ç—å—Å—è —Å JAR-—Ñ–∞–π–ª–æ–º. –ù–µ –∫–ª–∞–¥–∏ —ç—Ç–æ –≤ `code to image py`. –≠—Ç–æ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –¥—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º ‚Äî —Ä–∞–∑–Ω—ã–µ –∑–æ–Ω—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å, —Å–∫–∞–∂–µ–º, `diagram renderer py` —Ä—è–¥–æ–º —Å `font manager py`.

–í —ç—Ç–æ–º –º–æ–¥—É–ª–µ –Ω–∞–º –Ω—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ù–∞–∑–æ–≤–∏ –µ—ë `ensure java environment`. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ –¥–µ—Ä–Ω—É—Ç—å –≤–µ—Ä—Å–∏—é Java –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ. –ï—Å–ª–∏ Java –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç ‚Äî –º—ã —Å—Ä–∞–∑—É –ø–∞–¥–∞–µ–º —Å –ø–æ–Ω—è—Ç–Ω–æ–π –æ—à–∏–±–∫–æ–π, –Ω–µ –ø—ã—Ç–∞—è—Å—å –Ω–∏—á–µ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å.

–ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –Ω–∞–ø—Ä–∏–º–µ—Ä, `render diagram from string`.
–ï–µ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å:
1. –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º—ã (—Å—Ç—Ä–æ–∫–∞).
2. –ü—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å).
3. –§–æ—Ä–º–∞—Ç (PNG –∏–ª–∏ SVG).
4. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ —Ç–µ–º–µ.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏:**
–¢—ã –Ω–µ —Å–æ–∑–¥–∞–µ—à—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –≤—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ ‚Äî —ç—Ç–æ –ª–∏—à–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞. –¢—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å `subprocess Popen`. –¢—ã —Å–∫–∞—Ä–º–ª–∏–≤–∞–µ—à—å –∫–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º—ã –≤ `stdin` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥) –ø—Ä–æ—Ü–µ—Å—Å–∞ Java, –∞ JAR-—Ñ–∞–π–ª –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä—è–º–æ –≤ —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ.

–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –º–æ–º–µ–Ω—Ç: –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∑–∞–ø—É—Å–∫–∞ Java –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å —Ñ–ª–∞–≥ `-Dplantuml.smetana=true`. –≠—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –≥—Ä–∞—Ñ–æ–≤, —á—Ç–æ–±—ã –Ω–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Graphviz –≤ —Å–∏—Å—Ç–µ–º—É.

–¢–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑—É–π –ª–æ–≥–∏–∫—É "—Å–ª–∏—è–Ω–∏—è": –µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–∞ —Ç–µ–º–∞, —Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –ø—Ä–∏–∫–ª–µ–∏–≤–∞–µ—à—å —Å—Ç—Ä–æ–∫—É `!include path/to/theme` –∫ –Ω–∞—á–∞–ª—É –∫–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ JAR.

### –§–∞–∑–∞ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –°–µ—Ä–≤–µ—Ä (API –°–ª–æ—è) üîå

–¢–µ–ø–µ—Ä—å —É—á–∏–º —Ç–≤–æ–π MCP —Å–µ—Ä–≤–µ—Ä (`server py`) –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–º –¥–≤–∏–∂–∫–æ–º.

–ú—ã –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–∞–∑–æ–≤–µ–º –µ–≥–æ `generate architecture diagram`.
–í –µ–≥–æ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ –±—É–¥—É—Ç:
- –ö–æ–¥ –¥–∏–∞–≥—Ä–∞–º–º—ã.
- –ü—É—Ç—å –≤—ã—Ö–æ–¥–∞.
- –§–æ—Ä–º–∞—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é PNG).
- –ò–º—è —Ç–µ–º—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `default`).

–í–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è:
1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—É—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π (–∫–∞–∫ –º—ã –¥–µ–ª–∞–ª–∏ —Ä–∞–Ω—å—à–µ).
2. –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ Java (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫—Ä–∞—Å–∏–≤—É—é –æ—à–∏–±–∫—É —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ JRE").
3. –ù–∞—Ö–æ–¥–∏–º –ø—É—Ç—å –∫ —Ç–µ–º–µ –≤ `asset themes`.
4. –í—ã–∑—ã–≤–∞–µ–º –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏–∑ –≤—Ç–æ—Ä–æ–π —Ñ–∞–∑—ã.
5. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ –æ—à–∏–±–∫—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (PlantUML –æ–±—ã—á–Ω–æ –ø–∏—à–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ø—Ä—è–º–æ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ, –Ω–æ –µ—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å —É–ø–∞–ª, –Ω–∞–º –Ω—É–∂–Ω–æ —ç—Ç–æ –ø–æ–π–º–∞—Ç—å).

### –§–∞–∑–∞ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ "–ó–∞—â–∏—Ç–∞ –æ—Ç –î—É—Ä–∞–∫–∞" üõ°Ô∏è

–≠—Ç–æ —ç—Ç–∞–ø –ø–æ–ª–∏—Ä–æ–≤–∫–∏.

–í–æ-–ø–µ—Ä–≤—ã—Ö, –ø—Ä–æ–≤–µ—Ä—å –∫–∏—Ä–∏–ª–ª–∏—Ü—É. Java –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ Windows –∏–Ω–æ–≥–¥–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —á–µ—Ä–µ–∑ `stdin` —Ç—ã —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—à—å –∫–æ–¥–∏—Ä–æ–≤–∫—É UTF-8, –∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∑–∞–ø—É—Å–∫–∞ JAR —Ç–æ–∂–µ —Å—Ç–æ–∏—Ç `-charset UTF-8`. –ò–Ω–∞—á–µ –¥–∏–∞–≥—Ä–∞–º–º—ã —Å —Ä—É—Å—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º –ø—Ä–µ–≤—Ä–∞—Ç—è—Ç—Å—è –≤ –∫—Ä–∞–∫–æ–∑—è–±—Ä—ã.

–í–æ-–≤—Ç–æ—Ä—ã—Ö, –ø–æ–¥—É–º–∞–π –æ —à—Ä–∏—Ñ—Ç–∞—Ö. PlantUML –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã. –ï—Å–ª–∏ —Ç—ã –≤ —Ç–µ–º–µ –ø—Ä–æ–ø–∏—à–µ—à—å `JetBrains Mono`, –∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ) –µ–≥–æ –Ω–µ—Ç, Java –ø–æ–¥—Å—Ç–∞–≤–∏—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —à—Ä–∏—Ñ—Ç. –í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —à—Ä–∏—Ñ—Ç, –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å–µ–º–µ–π—Å—Ç–≤–∞ –∏–ª–∏ —Ç–µ, —á—Ç–æ —Ç–æ—á–Ω–æ –µ—Å—Ç—å.

### –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ –∏ –º–æ–¥—É–ª–µ–π

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —É —Ç–µ–±—è –ø–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª `diagram renderer py`.
–ü–∞–ø–∫–∞ `asset` —Å—Ç–∞–Ω–µ—Ç –±–æ–≥–∞—á–µ:
- `asset / fonts /` (—Ç–≤–æ–∏ TTF)
- `asset / bins / plantuml.jar` (–¥–≤–∏–∂–æ–∫)
- `asset / themes / dark.puml` (—Ç–≤–æ—è —Ç–µ–º–∞)

–ú–æ–¥—É–ª—å `server py` –ø—Ä–æ—Å—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ `diagram renderer py`, —Å–æ—Ö—Ä–∞–Ω—è—è —á–∏—Å—Ç–æ—Ç—É –∫–æ–¥–∞.
# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Code to Image MCP

> **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 30 –Ω–æ—è–±—Ä—è 2025 ‚Äî Phase 4 (AST Code Extractor)  
> **–í–µ—Ä—Å–∏—è:** 1.4.0  
> **–¢–µ—Å—Ç—ã:** 122 passed (19 AST + 15 Integration + 88 Unit)

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–¥—Å–∏—Å—Ç–µ–º:

1. **Code Screenshot Engine** ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ Pygments + Pillow
2. **Code Extractor** ‚Äî AST-based –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤/–º–µ—Ç–æ–¥–æ–≤ (Phase 4)
3. **PlantUML Diagram Renderer** ‚Äî –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ UML –¥–∏–∞–≥—Ä–∞–º–º —á–µ—Ä–µ–∑ Java + PlantUML JAR

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞

```
src/
‚îú‚îÄ‚îÄ code_to_image.py      # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –∫–æ–¥–∞
‚îú‚îÄ‚îÄ code_extractor.py     # AST-based –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞ (Phase 4)
‚îú‚îÄ‚îÄ diagram_renderer.py   # PlantUML —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
‚îú‚îÄ‚îÄ font_manager.py       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TTF —à—Ä–∏—Ñ—Ç–∞–º–∏
‚îú‚îÄ‚îÄ font_initializer.py   # –ò–Ω—ä–µ–∫—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤ –≤ JRE
‚îú‚îÄ‚îÄ image_utils.py        # –£—Ç–∏–ª–∏—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îî‚îÄ‚îÄ guide_manager.py      # –ú–µ–Ω–µ–¥–∂–µ—Ä PlantUML –≥–∞–π–¥–æ–≤
```

---

## 1. Code Screenshot Engine

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Pygments** ‚Äî –õ–µ–∫—Å–µ—Ä –∏ –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- **Pillow (PIL)** ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PNG –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- **ImageMagick-like flow** ‚Äî –†–µ–Ω–¥–µ—Ä ‚Üí PIL Image ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω

```
User Request
    ‚Üì
code_to_image.create_code_image()
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. Pygments Lexer              ‚îÇ ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–¥–∞ –ø–æ —è–∑—ã–∫—É
‚îÇ 2. Pygments Style              ‚îÇ ‚Üí –í—ã–±–æ—Ä —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã
‚îÇ 3. ImageFormatter              ‚îÇ ‚Üí –†–µ–Ω–¥–µ—Ä –≤ –±–∞–π—Ç—ã PNG
‚îÇ 4. PIL Image.open()            ‚îÇ ‚Üí –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –ø–∞–º—è—Ç—å
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
image_utils.save_image()
    ‚Üì
PNG/WEBP/JPEG —Ñ–∞–π–ª
```

---

## 1.5. Code Extractor (Phase 4)

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **ast module** ‚Äî –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä Python –¥–ª—è AST –∞–Ω–∞–ª–∏–∑–∞
- **Zero dependencies** ‚Äî –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —á–∏—Å—Ç–æ–º Python 3.13+

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω

```
User Request: extract "OrderService.create_order"
    ‚Üì
code_extractor.extract_code_entity()
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. ast.parse(source_code)              ‚îÇ ‚Üí –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ AST –¥–µ—Ä–µ–≤–∞
‚îÇ 2. –ü–æ–∏—Å–∫ —Å—É—â–Ω–æ—Å—Ç–∏ –ø–æ –∏–º–µ–Ω–∏             ‚îÇ ‚Üí –û–±—Ö–æ–¥ ast.walk()
‚îÇ 3. ast.get_source_segment()            ‚îÇ ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞
‚îÇ 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚îÇ ‚Üí @decorator
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
–ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–π Python –∫–æ–¥ (str)
```

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏–º—ë–Ω

```python
# –§—É–Ω–∫—Ü–∏—è
extract_code_entity("path/to/file.py", "calculate_sum")

# –ö–ª–∞—Å—Å
extract_code_entity("path/to/file.py", "OrderService")

# –ú–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞
extract_code_entity("path/to/file.py", "OrderService.create_order")

# Async –º–µ—Ç–æ–¥
extract_code_entity("path/to/file.py", "PaymentProcessor.process_payment")
```

#### –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

```python
# –ë–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤
code = extract_code_entity("file.py", "old_function", include_decorators=False)
# def old_function(x: str) -> str:
#     return x.upper()

# –° –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
code = extract_code_entity("file.py", "old_function", include_decorators=True)
# @deprecated
# def old_function(x: str) -> str:
#     return x.upper()
```

#### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

```python
entities = list_entities("file.py")
# {
#   "functions": ["calculate_sum", "old_function", "fetch_data"],
#   "classes": {
#     "User": ["activate", "deactivate"],
#     "OrderService": ["create_order", "calculate_total", "from_config"]
#   }
# }
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞–¥ regex

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Regex | AST |
|----------|-------|-----|
| –¢–æ—á–Ω–æ—Å—Ç—å | 60-70% | 99.9% |
| –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ |
| –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã | ‚ùå –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç | ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| Async —Ñ—É–Ω–∫—Ü–∏–∏ | ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| Docstrings | ‚ùå –ü—Ä–æ–±–ª–µ–º—ã | ‚úÖ –í–∫–ª—é—á–µ–Ω—ã |
| –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ | ‚úÖ –õ—é–±–æ–π | ‚úÖ –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π |

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Code Screenshot Engine

#### DPI-–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –∏ –æ—Ç—Å—Ç—É–ø—ã —É–º–Ω–æ–∂–∞—é—Ç—Å—è –Ω–∞ scale_factor
scaled_font_size = int(font_size * scale_factor)  # 18 * 3.0 = 54
scaled_pad = int(pad * scale_factor)              # 25 * 3.0 = 75
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 3840√ó2160 –≤–º–µ—Å—Ç–æ 1280√ó720 (4K ready).

#### –ö–∞—Å—Ç–æ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã

```python
font_path = get_font_path("JetBrainsMono")
# ‚Üí "C:/PY/code_to_image_mcp/asset/fonts/JetBrainsMono-Regular.ttf"

formatter = ImageFormatter(
    font_name=font_path,  # –ü—É—Ç—å –∫ TTF, –ù–ï –∏–º—è —à—Ä–∏—Ñ—Ç–∞!
    ...
)
```

**–í–∞–∂–Ω–æ:** Pygments —Ç—Ä–µ–±—É–µ—Ç **–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å** –∫ TTF —Ñ–∞–π–ª—É, –∞ –Ω–µ –∏–º—è —à—Ä–∏—Ñ—Ç–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.

---

## 2. PlantUML Diagram Renderer

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Java JRE** ‚Äî –û–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ PlantUML
- **PlantUML JAR** ‚Äî –î–≤–∏–∂–æ–∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (`asset/bins/plantuml.jar`)
- **Subprocess** ‚Äî –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Python ‚Üî Java —á–µ—Ä–µ–∑ stdin/stdout
- **Pillow** ‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (PNG –∏–∑ –±–∞–π—Ç–æ–≤)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω

```
User Request
    ‚Üì
diagram_renderer.render_diagram_to_image()
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤ (–æ–¥–∏–Ω —Ä–∞–∑)    ‚îÇ
‚îÇ    font_initializer.ensure_fonts_initialized()
‚îÇ                                         ‚îÇ
‚îÇ 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–¥–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã           ‚îÇ
‚îÇ    _prepare_diagram_code()             ‚îÇ
‚îÇ    ‚Üí –í—Å—Ç–∞–≤–∫–∞ !include —Ç–µ–º—ã             ‚îÇ
‚îÇ    ‚Üí –î–æ–±–∞–≤–ª–µ–Ω–∏–µ !pragma layout smetana ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ 3. –ó–∞–ø—É—Å–∫ Java –ø—Ä–æ—Ü–µ—Å—Å–∞                ‚îÇ
‚îÇ    subprocess.run([                    ‚îÇ
‚îÇ      "java", "-jar", "plantuml.jar",   ‚îÇ
‚îÇ      "-pipe", "-tpng", ...             ‚îÇ
‚îÇ    ], input=diagram_code)              ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞                ‚îÇ
‚îÇ    - Stderr ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫          ‚îÇ
‚îÇ    - Stdout ‚Üí PNG –±–∞–π—Ç—ã                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
image_utils.load_image_from_bytes()
    ‚Üì
PIL Image –æ–±—ä–µ–∫—Ç
```

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏—á–∞: –ò–Ω—ä–µ–∫—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤ –≤ JRE

PlantUML –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Java –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–∞. –ß—Ç–æ–±—ã **–∫–∞—Å—Ç–æ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã** (JetBrains Mono, Fira Code) —Ä–∞–±–æ—Ç–∞–ª–∏, –∏—Ö –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —à—Ä–∏—Ñ—Ç–æ–≤ JRE.

#### –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

```
font_initializer.ensure_fonts_initialized()
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä–∫–µ—Ä–∞                   ‚îÇ
‚îÇ    –§–∞–π–ª: .fonts_installed.json        ‚îÇ
‚îÇ    –°–æ–¥–µ—Ä–∂–∏—Ç: –ø—É—Ç—å –∫ JRE, —Å–ø–∏—Å–æ–∫ —à—Ä–∏—Ñ—Ç–æ–≤‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ 2. –ï—Å–ª–∏ –º–∞—Ä–∫–µ—Ä–∞ –Ω–µ—Ç:                  ‚îÇ
‚îÇ    –∞) –ù–∞–π—Ç–∏ Java Home                 ‚îÇ
‚îÇ       java -XshowSettings:properties  ‚îÇ
‚îÇ    –±) –ù–∞–π—Ç–∏ lib/fonts –≤ JRE           ‚îÇ
‚îÇ    –≤) –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å *.ttf –∏–∑ asset/fonts‚îÇ
‚îÇ    –≥) –°–æ–∑–¥–∞—Ç—å –º–∞—Ä–∫–µ—Ä                  ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ 3. –ï—Å–ª–∏ –º–∞—Ä–∫–µ—Ä –µ—Å—Ç—å:                  ‚îÇ
‚îÇ    ‚Üí –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ü—Ä–∏–º–µ—Ä –º–∞—Ä–∫–µ—Ä–∞

```json
{
  "java_home": "C:\\Program Files\\Java\\jdk-17",
  "fonts_installed": [
    "JetBrainsMono-Regular.ttf",
    "FiraCode-Regular.ttf"
  ],
  "platform": "Windows",
  "timestamp": "1701350400.0"
}
```

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?**

- PlantUML **–Ω–µ –≤–∏–¥–∏—Ç** —à—Ä–∏—Ñ—Ç—ã –∏–∑ `asset/fonts/` –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ JRE
- Windows API `AddFontResourceExW` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, –Ω–æ –Ω–µ –¥–ª—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ Java –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ JRE ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±

---

## 3. –°–∏—Å—Ç–µ–º–∞ —Ç–µ–º PlantUML

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
User: theme="dark_gold"
    ‚Üì
diagram_renderer._prepare_diagram_code()
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–µ–º—ã        ‚îÇ
‚îÇ    Path("asset/themes/dark_gold.puml") ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ 2. –í—Å—Ç–∞–≤–∫–∞ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –≤–∫–ª—é—á–µ–Ω–∏—è        ‚îÇ
‚îÇ    !include asset/themes/dark_gold.puml‚îÇ
‚îÇ    ‚Üí –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ü–ï–†–ï–î @startuml       ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Smetana (–Ω–æ–≤—ã–π –¥–≤–∏–∂–æ–∫)  ‚îÇ
‚îÇ    !pragma layout smetana              ‚îÇ
‚îÇ    ‚Üí –£–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∞–≤—Ç–æ–ª–µ–π–∞—É—Ç–∞    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–º–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

**–í—Ö–æ–¥–Ω–æ–π –∫–æ–¥:**

```plantuml
@startuml
component "API" <<Adapter>>
@enduml
```

**–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ `_prepare_diagram_code()`:**

```plantuml
@startuml
!pragma layout smetana
!include asset/themes/dark_gold.puml

component "API" <<Adapter>>
@enduml
```

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:** PlantUML —Å–Ω–∞—á–∞–ª–∞ —á–∏—Ç–∞–µ—Ç —Å—Ç–∏–ª–∏ –∏–∑ —Ç–µ–º—ã, **–ø–æ—Ç–æ–º** –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏—Ö –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º —Å —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø–∞–º–∏.

---

## 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (image_utils)

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π Pipeline

```python
# 1. –ò—Å—Ç–æ—á–Ω–∏–∫: Pillow Image (–∏–∑ Pygments –∏–ª–∏ PlantUML)
image: PIL.Image.Image

# 2. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
if scale_factor != 1.0:
    image = resize_image(image, scale_factor)

# 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
save_image(
    image,
    output_path="result.webp",
    format="webp",
    quality=90  # –ë–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä
)
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### WebP (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

- **–ú–µ—Ç–æ–¥:** `lossless=False` + –∫–∞—á–µ—Å—Ç–≤–æ 90
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–∞ 30% –º–µ–Ω—å—à–µ PNG –ø—Ä–∏ —Ç–æ–º –∂–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ

#### PNG

- **–ú–µ—Ç–æ–¥:** `optimize=True` + `compress_level=9`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∫–∞—á–µ—Å—Ç–≤–∞

#### JPEG

- **–ê–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Å–∏—è RGBA ‚Üí RGB** (JPEG –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–ª—å—Ñ–∞-–∫–∞–Ω–∞–ª)
- **–ö–∞—á–µ—Å—Ç–≤–æ:** 92 (–±–∞–ª–∞–Ω—Å –¥–ª—è –∫–æ–¥–∞ —Å –º–µ–ª–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º)

---

## 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∞–π–¥–∞–º–∏ (guide_manager)

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **AI-–∞–≥–µ–Ω—Ç–∞–º** –∫—Ä–∞—Ç–∫–∏–µ/–ø–æ–ª–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ PlantUML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –ø—Ä—è–º–æ —á–µ—Ä–µ–∑ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
doc/plantuml_guides/
‚îú‚îÄ‚îÄ index.json           # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –≥–∞–π–¥–æ–≤
‚îú‚îÄ‚îÄ class_diagram.md     # Markdown —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏
‚îú‚îÄ‚îÄ sequence_diagram.md
‚îî‚îÄ‚îÄ themes.md

Markdown —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
<!-- BRIEF_START -->
–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (500 —Å–∏–º–≤–æ–ª–æ–≤)
<!-- BRIEF_END -->

<!-- DETAILED_START -->
–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
<!-- DETAILED_END -->
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ MCP

```python
# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è AI-–∞–≥–µ–Ω—Ç–∞
@mcp.tool()
def get_plantuml_guide(diagram_type: str, detail_level: str = "brief"):
    content = get_guide(diagram_type, full=(detail_level == "full"))
    return {"guide": content}
```

**–ü–æ–ª—å–∑–∞:** –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø—Ä—è–º–æ –≤–æ –≤—Ä–µ–º—è –¥–∏–∞–ª–æ–≥–∞, –Ω–µ –∑–∞–≥—Ä—É–∂–∞—è –≤–µ—Å—å –≥–∞–π–¥ –≤ –ø—Ä–æ–º–ø—Ç.

---

## 6. –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –∫–æ–¥–∞ (High-level)

```mermaid
graph LR
    A[MCP Tool Call] --> B[server.py]
    B --> C[code_to_image.py]
    C --> D[Pygments Render]
    D --> E[PIL Image]
    E --> F[image_utils.save]
    F --> G[WEBP —Ñ–∞–π–ª]
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º—ã (High-level)

```mermaid
graph TD
    A[MCP Tool Call] --> B[server.py]
    B --> C[diagram_renderer.py]
    C --> D{–®—Ä–∏—Ñ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã?}
    D -- –ù–µ—Ç --> E[font_initializer]
    E --> F[–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ TTF –≤ JRE]
    F --> G[Java PlantUML Process]
    D -- –î–∞ --> G
    G --> H[PNG bytes]
    H --> I[PIL Image]
    I --> J[image_utils.save]
    J --> K[PNG/SVG —Ñ–∞–π–ª]
```

---

## 7. –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å

### Windows

- ‚úÖ Font injection —á–µ—Ä–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ JRE (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ Subprocess —Å UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è Java 11+ –≤ PATH

### macOS

- ‚úÖ Font injection —á–µ—Ä–µ–∑ JRE
- ‚úÖ Homebrew Java –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚ö†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `doc/macos_compatibility.md`

### Linux

- ‚úÖ Font injection —á–µ—Ä–µ–∑ JRE
- ‚úÖ OpenJDK –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `/usr/lib/jvm/.../lib/fonts`

---

## 8. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –£–∑–∫–∏–µ –º–µ—Å—Ç–∞

| –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è |
|----------|-------|-------------|
| PlantUML —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ | 1-3 —Å–µ–∫ | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –ò–Ω—ä–µ–∫—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤ | 500 –º—Å | –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è 1 —Ä–∞–∑, –∑–∞—Ç–µ–º –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è |
| Pygments —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ | 100-300 –º—Å | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏–Ω—ã –∫–æ–¥–∞ |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ WEBP | 50-200 –º—Å | –ë—ã—Å—Ç—Ä–µ–µ PNG –Ω–∞ 40% |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –º–∞—Å—Å–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–µ—à PlantUML —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Ö–µ—à –∫–æ–¥–∞ ‚Üí —Ñ–∞–π–ª)
2. **–î–ª—è API:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (Celery)
3. **–î–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π:** –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ 4K –æ–¥–∏–Ω —Ä–∞–∑, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

---

## 9. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### PlantUML Code Injection

PlantUML –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `!include` –¥–∏—Ä–µ–∫—Ç–∏–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:

```plantuml
@startuml
!include /etc/passwd
@enduml
```

**–ó–∞—â–∏—Ç–∞:** –í `_prepare_diagram_code()` –º—ã **–∑–∞–º–µ–Ω—è–µ–º** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–¥, –≤—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã. PlantUML –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å `-failfast2`, –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

### Java Sandbox

PlantUML JAR –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–±–µ–∑** —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (`-Dplantuml.security.mode=sandbox` –≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö).

---

## 10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ test_code_extractor.py    # AST –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞ (Phase 4)
‚îú‚îÄ‚îÄ test_diagram_renderer.py  # PlantUML —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
‚îú‚îÄ‚îÄ test_font_*.py            # –ò–Ω—ä–µ–∫—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤ (3 —Ñ–∞–π–ª–∞)
‚îú‚îÄ‚îÄ test_guide_manager.py     # –ì–∞–π–¥—ã PlantUML
‚îú‚îÄ‚îÄ test_image_utils.py       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ test_integration.py       # –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ E2E —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ assets/                   # –¢–µ—Å—Ç–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã
    ‚îú‚îÄ‚îÄ sample_code.py        # Python –∫–æ–¥ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ sequence_diagram.puml # –¢–µ—Å—Ç–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
    ‚îú‚îÄ‚îÄ class_diagram.puml    # –¢–µ—Å—Ç–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
    ‚îú‚îÄ‚îÄ activity_diagram.puml # –¢–µ—Å—Ç–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
    ‚îî‚îÄ‚îÄ component_diagram.puml # –¢–µ—Å—Ç–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

- **122 —Ç–µ—Å—Ç–∞** –≤ 8 —Ñ–∞–π–ª–∞—Ö
- **19 —Ç–µ—Å—Ç–æ–≤** –¥–ª—è AST —ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∞ (100% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- **15 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤** (E2E —Å—Ü–µ–Ω–∞—Ä–∏–∏)
- **–§–æ—Ä–º–∞—Ç—ã:** PNG, SVG, WebP
- **–¢–µ–º—ã:** dark_gold, light_fresh, default

### –ó–∞–ø—É—Å–∫

```bash
pytest tests/ -v                    # –í—Å–µ —Ç–µ—Å—Ç—ã (122 —à—Ç)
pytest tests/test_integration.py -v # –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ
pytest tests/test_code_extractor.py -v # AST —ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä
pytest -k "font" -v                 # –¢–æ–ª—å–∫–æ font-—Ç–µ—Å—Ç—ã
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**test_integration.py** –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–µ workflow:

1. **TestCodeScreenshotsWorkflow** ‚Äî –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ–¥–∞
   - –ü–æ–ª–Ω—ã–π —Ñ–∞–π–ª
   - –û—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (—á–µ—Ä–µ–∑ AST)
   - –ö–ª–∞—Å—Å —Ü–µ–ª–∏–∫–æ–º
   - –ú–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞

2. **TestPlantUMLDiagramsWorkflow** ‚Äî –î–∏–∞–≥—Ä–∞–º–º—ã
   - PNG —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏ (4 –¥–∏–∞–≥—Ä–∞–º–º—ã √ó 3 —Ç–µ–º—ã)
   - SVG —Ñ–æ—Ä–º–∞—Ç (4 –¥–∏–∞–≥—Ä–∞–º–º—ã)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PNG ‚Üí WebP

3. **TestEndToEndScenarios** ‚Äî –°–∫–≤–æ–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–∫–æ–¥ + –¥–∏–∞–≥—Ä–∞–º–º—ã + WebP)
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (—Ñ—É–Ω–∫—Ü–∏—è, –∫–ª–∞—Å—Å, –º–µ—Ç–æ–¥)

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [PlantUML –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://plantuml.com/ru/)
- [Pygments –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://pygments.org/docs/)
- [Pillow —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](https://pillow.readthedocs.io/)
- [FastMCP –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://github.com/jlowin/fastmcp)

---

**–í–æ–ø—Ä–æ—Å—ã –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ?** –ò–∑—É—á–∏—Ç–µ –∫–æ–¥ –º–æ–¥—É–ª–µ–π –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

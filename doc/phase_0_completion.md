# –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –§–∞–∑—ã 0

## 1. ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å macOS

**–î–∞, —Ä–µ—à–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å macOS!**

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Java —á–µ—Ä–µ–∑ `which java` (Unix –∫–æ–º–∞–Ω–¥–∞)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ `java -XshowSettings:properties` (–∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—É—Ç–µ–π JRE –¥–ª—è –≤—Å–µ—Ö –û–°
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `lib/fonts` –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Java –¥–ª—è macOS: `brew install openjdk`

### –ü—É—Ç–∏ –∫ Java –Ω–∞ macOS

```
/Library/Java/JavaVirtualMachines/jdk-XX.jdk/Contents/Home
/opt/homebrew/opt/openjdk  (Apple Silicon)
/usr/local/opt/openjdk     (Intel Mac)
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã –Ω–∞ macOS

- **System Integrity Protection (SIP)**: –°–∏—Å—Ç–µ–º–Ω–∞—è Java –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—â–∏—â–µ–Ω–∞
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Homebrew Java (`brew install openjdk`)
- **–ü—Ä–∞–≤–∞**: –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è sudo –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–π Java, –Ω–æ Homebrew Java –æ–±—ã—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –∑–∞–ø–∏—Å—å

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ macOS

–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```bash
pytest tests/test_font_initializer.py -v
pytest tests/test_font_integration.py -v
pytest tests/test_font_diagnostic.py -v
```

**–î–µ—Ç–∞–ª–∏:** –°–º. `doc/macos_compatibility.md`

---

## 2. ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!** –í—Å–µ —Ç–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç `docstring_guide.instructions.md`:

### –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ docstring –¥–ª—è —Ç–µ—Å—Ç–æ–≤

```python
def test_ensure_fonts_initialized_success(self):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —à—Ä–∏—Ñ—Ç–æ–≤."""
    # –¢–µ–ª–æ —Ç–µ—Å—Ç–∞...
```

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

- ‚úÖ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –≥–ª–∞–≥–æ–ª–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –ù–ï–¢ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤ (–æ–Ω–∏ –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ)

### –§–∞–π–ª—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

- `tests/test_font_initializer.py` - –≤—Å–µ 4 —Ç–µ—Å—Ç–∞
- `tests/test_font_diagnostic.py` - –≤—Å–µ 5 —Ç–µ—Å—Ç–æ–≤  
- `tests/test_font_integration.py` - –≤—Å–µ 7 —Ç–µ—Å—Ç–æ–≤

---

## 3. ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!** –í—Å–µ –ª–æ–≥–∏ —Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç `doc/logging.md`:

### –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `diagram_renderer.py`

```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —à—Ä–∏—Ñ—Ç–æ–≤ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –∑–∞—Ç–µ–º –∫–µ—à–∏—Ä—É–µ—Ç—Å—è)
logger.debug("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤")
font_init_result = ensure_fonts_initialized()

if not font_init_result["success"]:
    logger.error(f"‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —à—Ä–∏—Ñ—Ç–æ–≤: {font_init_result['error']}")
    raise JavaNotFoundError(font_init_result["error"])

if font_init_result["already_installed"]:
    logger.debug(f"‚úÖ –®—Ä–∏—Ñ—Ç—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: {len(font_init_result['fonts'])} —Ñ–∞–π–ª–æ–≤")
else:
    logger.info(
        f"üíâ –®—Ä–∏—Ñ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ JRE: {len(font_init_result['fonts'])} —Ñ–∞–π–ª–æ–≤ "
        f"({font_init_result['java_home']})"
    )
```

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

| –≠–º–æ–¥–∑–∏ | –£—Ä–æ–≤–µ–Ω—å | –°–æ–±—ã—Ç–∏–µ | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|--------|---------|---------|------------------|
| üîç | DEBUG | –ü–æ–∏—Å–∫/–ø—Ä–æ–≤–µ—Ä–∫–∞ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —à—Ä–∏—Ñ—Ç–æ–≤ |
| ‚úÖ | INFO | –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ | –®—Ä–∏—Ñ—Ç—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã |
| üíâ | INFO | –ò–Ω—ä–µ–∫—Ü–∏—è —Ä–µ—Å—É—Ä—Å–∞ | –®—Ä–∏—Ñ—Ç—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ JRE |
| ‚ùå | ERROR | –û—à–∏–±–∫–∞ | –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ |
| üîß | INFO | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –ù–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤ |
| üìÅ | DEBUG | –†–∞–±–æ—Ç–∞ —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π | –ù–∞–π–¥–µ–Ω–∞ –ø–∞–ø–∫–∞ fonts –≤ JRE |
| ‚òï | INFO | Java –æ–∫—Ä—É–∂–µ–Ω–∏–µ | –ù–∞–π–¥–µ–Ω–∞ Java —É—Å—Ç–∞–Ω–æ–≤–∫–∞ |

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–ó–∞–ø—É—Å—Ç–∏—Ç–µ `python tests/demo_logging.py` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤ –¥–µ–π—Å—Ç–≤–∏–∏:

```
21:33:35 | INFO     | diagram_renderer | üìê –ù–∞—á–∞–ª–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ PlantUML –¥–∏–∞–≥—Ä–∞–º–º—ã
21:33:35 | DEBUG    | diagram_renderer | üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤
21:33:35 | INFO     | font_initializer | üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —à—Ä–∏—Ñ—Ç–æ–≤...
21:33:35 | DEBUG    | font_initializer | ‚úÖ –ù–∞–π–¥–µ–Ω –º–∞—Ä–∫–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤
21:33:35 | INFO     | font_initializer | ‚úÖ –®—Ä–∏—Ñ—Ç—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ JRE
21:33:35 | DEBUG    | diagram_renderer | ‚úÖ –®—Ä–∏—Ñ—Ç—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: 3 —Ñ–∞–π–ª–æ–≤
```

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –§–∞–∑—ã 0

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `font_initializer.py` (337 —Å—Ç—Ä–æ–∫) - —É–º–Ω—ã–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä —à—Ä–∏—Ñ—Ç–æ–≤
2. ‚úÖ `tests/test_font_initializer.py` (92 —Å—Ç—Ä–æ–∫–∏) - 4 —Ç–µ—Å—Ç–∞
3. ‚úÖ `tests/test_font_diagnostic.py` (121 —Å—Ç—Ä–æ–∫–∞) - 5 –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
4. ‚úÖ `tests/test_font_integration.py` (138 —Å—Ç—Ä–æ–∫) - 7 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
5. ‚úÖ `tests/demo_logging.py` (51 —Å—Ç—Ä–æ–∫–∞) - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
6. ‚úÖ `doc/macos_compatibility.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å macOS
7. ‚úÖ `.gitignore` - –¥–æ–±–∞–≤–ª–µ–Ω `.fonts_installed.json`

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `diagram_renderer.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è font_initializer + —É–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
2. ‚úÖ `font_manager.py` - —É–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è PlantUML (—Ç–æ–ª—å–∫–æ –¥–ª—è code screenshots)

### –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

```bash
pytest tests/ -v
# 16 —Ç–µ—Å—Ç–æ–≤: ‚úÖ 16 passed
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏—è

1. üöÄ **–û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** - —à—Ä–∏—Ñ—Ç—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
2. üíæ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –º–∞—Ä–∫–µ—Ä-—Ñ–∞–π–ª `.fonts_installed.json`
3. ‚ö° **–ë—ã—Å—Ç—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏** - 0.02s –≤–º–µ—Å—Ç–æ —Å–µ–∫—É–Ω–¥
4. üåç **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - Windows + macOS + Linux
5. üìù **–ü–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Java
6. üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
7. üìä **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —ç–º–æ–¥–∑–∏ + —É—Ä–æ–≤–Ω–∏

---

## üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–§–∞–∑–∞ 0 –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É:

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1**: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (DPI, WebP)
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2**: –°–æ–∑–¥–∞–Ω–∏–µ 4 —Ç–µ–º PlantUML (dark, light, green, purple)
3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≥–∞–π–¥–æ–≤ PlantUML –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤

**–ì–æ—Ç–æ–≤—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? üöÄ**
